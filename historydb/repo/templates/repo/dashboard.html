<!doctype html>
{% load static %}
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Jekyll v4.1.1">
    <title>Dashboard Template Â· Bootstrap</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/4.5/examples/dashboard/">

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">

    <script type = "text/JavaScript">
        function Hello() {
            alert("Hello, World");
        }

        function UpdateDeps() {
            var libraries = {{ libraries_avail | safe }}
            for (i=0; i<libraries.length; i++) {
                console.log(libraries[i])
            };

            var application_var = document.getElementById("applicationVal");
            //alert(application_var.options[application_var.selectedIndex].value);

            var application_name = application_var.options[application_var.selectedIndex].value;
            //alert(application_name)

            var machine_deps_json = {{ machine_deps_json | safe | escape }};
            //alert(tempvalues)
            //alert(tempvalues[application_name]);

            var machine_deps_div = document.getElementById("machine_deps");
            machine_deps_div.innerHTML = "";
            var machine_deps_label = document.createElement("label")
            machine_deps_label.appendChild(document.createTextNode("Machines available"));
            machine_deps_div.appendChild(machine_deps_label);
            machine_deps_div.appendChild(document.createElement('br'));
            //alert("!!!!");
            for (i=0; i<machine_deps_json[application_name].length; i++) {
                var x = document.createElement("input");
                x.setAttribute("type", "checkbox");
                x.setAttribute("value", machine_deps_json[application_name][i]);
                x.setAttribute("name", machine_deps_json[application_name][i]);
                machine_deps_div.appendChild(x);

                var label = document.createElement("label");
                label.appendChild(document.createTextNode(machine_deps_json[application_name][i]));
                machine_deps_div.appendChild(label);

                var linebreak = document.createElement("br");
                linebreak.appendChild(document.createTextNode(machine_deps_json[application_name][i]));
                machine_deps_div.appendChild(linebreak);
            }

            //alert("machine deps");

            //for (i=0; i<tempvalues[application_name].length; i++)
            //    select.options[select.options.length] = new Option('Text 1', 'Value 1');

            var software_deps_json = {{ software_deps_json | safe | escape }};

            var software_deps_div = document.getElementById("software_deps");
            software_deps_div.innerHTML = "";
            var software_deps_label = document.createElement("label");
            //alert("software_deps");
            software_deps_label.appendChild(document.createTextNode("Software deps"));
            software_deps_div.appendChild(software_deps_label);
            software_deps_div.appendChild(document.createElement("br"));

            for (i=0; i<software_deps_json[application_name].length; i++) {
                var x = document.createElement("input");
                x.setAttribute("type", "checkbox");
                x.setAttribute("value", software_deps_json[application_name][i]);
                x.setAttribute("name", software_deps_json[application_name][i]);
                software_deps_div.appendChild(x);

                var label = document.createElement("label");
                label.appendChild(document.createTextNode(software_deps_json[application_name][i]));
                software_deps_div.appendChild(label);

                var linebreak = document.createElement("br");
                linebreak.appendChild(document.createTextNode(software_deps_json[application_name][i]));
                software_deps_div.appendChild(linebreak);
            }

            var users_json = {{ users_json | safe | escape }};

            var users_div = document.getElementById("users_deps");
            users_div.innerHTML = "";
            var users_label = document.createElement("label");
            //alert("users");
            users_label.appendChild(document.createTextNode("Users"));
            users_div.appendChild(users_label);
            users_div.appendChild(document.createElement("br"));

            for (i=0; i<users_json[application_name].length; i++) {
                var x = document.createElement("input");
                x.setAttribute("type", "checkbox");
                x.setAttribute("value", users_json[application_name][i]);
                x.setAttribute("name", users_json[application_name][i]);
                users_div.appendChild(x);

                var label = document.createElement("label");
                label.appendChild(document.createTextNode(users_json[application_name][i]));
                users_div.appendChild(label);

                var linebreak = document.createElement("br");
                linebreak.appendChild(document.createTextNode(users_json[application_name][i]));
                users_div.appendChild(linebreak);
            }

            //var x = document.createElement("input");
            //x.setAttribute("type", "checkbox");
            //x.setAttribute("value", "abc");
            //x.setAttribute("name", "xyz");

            //var label = document.createElement("label")
            //label.appendChild(document.createTextNode(" ASDF"))

            alert("update deps done")
        }
    </script>

    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
    </style>
    <!-- Custom styles for this template -->
    <link rel="stylesheet" href="{% static 'css/starter-template.css' %}">
  </head>

<body>
  <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
  <a class="navbar-brand" href="#">GPTune History DB</a>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarsExampleDefault">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item">
        <a class="nav-link" href="{% url 'main:index' %}">Home<span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle active" href="#" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Public Repository</a>
        <div class="dropdown-menu" aria-labelledby="dropdown01">
          <a class="dropdown-item" href="{% url 'repo:dashboard' %}">Dashboard</a>
          <a class="dropdown-item" href="{% url 'repo:examples' %}">Examples</a>
        </div>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{% url 'documentation:index' %}">Documentation</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="https://github.com/gptune/GPTune/tree/history_db">Github</a>
      </li>
      <li class="nav-item">
          <a class="nav-link" href="{% url 'account:login' %}">Login</a>
      </li>
    </ul>

    {% if user.is_authenticated %}
    <a href="{% url 'account:logout' %}">
      <button class="btn btn-secondary my-2 my-sm-0">Logout</button>
    </a>
    {% endif %}

  </div>
</nav>



<div class="container-fluid">
  <div class="row">
    <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
      <div class="sidebar-sticky pt-3">
        <ul class="nav flex-column">
          <li class="nav-item">
            <a class="nav-link active" href="#">
              <span data-feather="home"></span>
              Dashboard <span class="sr-only">(current)</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'repo:display' %}">
              <span data-feather="file"></span>
              Display example
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="shopping-cart"></span>
              Placeholder
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="users"></span>
              Placeholder
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="bar-chart-2"></span>
              Placeholder
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="layers"></span>
              Placeholder
            </a>
          </li>
        </ul>
      </div>
    </nav>

    <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-md-4">
      <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h1 class="h2">Dashboard</h1>
        <div class="btn-toolbar mb-2 mb-md-0">
          <div class="btn-group mr-2">
            <button type="button" class="btn btn-sm btn-outline-secondary">Share</button>
            <button type="button" class="btn btn-sm btn-outline-secondary">Export</button>
          </div>
          <button type="button" class="btn btn-sm btn-outline-secondary dropdown-toggle">
            <span data-feather="calendar"></span>
            This week
          </button>
        </div>
      </div>

      <form method="get">
        <div class="well">
          <h2 style="margin-top: 0">Search Filter</h2>
          <div class="row">
            <div class="form-group col-sm-4 col-md-3">
                Application<br>
                <select name="application" id="applicationVal" onChange = "UpdateDeps();">
                  {% if applications_avail %}
                    {% for application_avail in applications_avail %}
                    <option value="{{ application_avail }}">{{ application_avail }}</option>
                    </li>
                    {% endfor %}
                  {% else %}
                  {% endif %}
                </select>
            </div>
            <div class="form-group col-sm-4 col-md-3" id="machine_deps">
            </div>
            <div class="form-group col-sm-4 col-md-3" id="software_deps">
            </div>
            <div class="form-group col-sm-8 col-md-6" id="users_deps">
            </div>
          </div>
          <button type="submit" class="btn btn-primary">
            <span class="glyphicon glyphicon-search"></span> Search
          </button>
        </div>
      </form>
    </main>
  </div>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script>window.jQuery || document.write('')</script><script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.9.0/feather.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js"></script>
        <script src="{% static 'js/dashboard.js' %}"></script></body>
</html>
