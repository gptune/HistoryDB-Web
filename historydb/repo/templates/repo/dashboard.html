<!doctype html>
{% load static %}
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Jekyll v4.1.1">
    <title>Dashboard Template Â· Bootstrap</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/4.5/examples/dashboard/">

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">

    <script type = "text/JavaScript">
        function Hello() {
            alert("Hello, World");
        }

        function UpdateDeps() {
            //var libraries = {{ libraries_avail | safe }}
            //for (i=0; i<libraries.length; i++) {
            //    console.log(libraries[i])
            //};

            var application_var = document.getElementById("applicationVal");
            //alert(application_var.options[application_var.selectedIndex].value);

            var application_name = application_var.options[application_var.selectedIndex].value;
            //alert(application_name)

            //var machine_deps_json = {{ machine_deps_json | safe | escape }};
            var machine_deps_json = {{ machine_deps_json | safe | escape }};
            //alert(tempvalues)
            //alert(tempvalues[application_name]);

            var machine_deps_div = document.getElementById("machine_deps");
            machine_deps_div.innerHTML = "";
            var machine_deps_label = document.createElement("label")
            machine_deps_label.appendChild(document.createTextNode("Machines available"));
            machine_deps_div.appendChild(machine_deps_label);
            machine_deps_div.appendChild(document.createElement('br'));
            for (i=0; i<machine_deps_json[application_name].length; i++) {
                var x = document.createElement("input");
                x.setAttribute("type", "checkbox");
                x.setAttribute("value", machine_deps_json[application_name][i]);
                x.setAttribute("name", machine_deps_json[application_name][i]);
                machine_deps_div.appendChild(x);

                var label = document.createElement("label");
                label.innerHTML = "<pre>" + JSON.stringify(machine_deps_json[application_name][i], null, 2) + "</pre>";
                machine_deps_div.appendChild(label);

                var linebreak = document.createElement("br");
                linebreak.appendChild(document.createTextNode(machine_deps_json[application_name][i]));
                machine_deps_div.appendChild(linebreak);
            }

            var software_deps_json = {{ software_deps_json | safe | escape }};

            var software_deps_div = document.getElementById("software_deps");
            software_deps_div.innerHTML = "";
            var software_deps_label = document.createElement("label");
            software_deps_label.appendChild(document.createTextNode("Software deps"));
            software_deps_div.appendChild(software_deps_label);
            software_deps_div.appendChild(document.createElement("br"));

            for (i=0; i<software_deps_json[application_name].length; i++) {
                var x = document.createElement("input");
                x.setAttribute("type", "checkbox");
                x.setAttribute("value", software_deps_json[application_name][i]);
                x.setAttribute("name", software_deps_json[application_name][i]);
                software_deps_div.appendChild(x);

                var label = document.createElement("label");
                label.innerHTML = "<pre>" + JSON.stringify(software_deps_json[application_name][i], null, 2) + "</pre>";
                software_deps_div.appendChild(label);

                var linebreak = document.createElement("br");
                linebreak.appendChild(document.createTextNode(software_deps_json[application_name][i]));
                software_deps_div.appendChild(linebreak);
            }

            var users_json = {{ users_json | safe | escape }};

            var users_div = document.getElementById("users_deps");
            users_div.innerHTML = "";
            var users_label = document.createElement("label");
            users_label.appendChild(document.createTextNode("Users"));
            users_div.appendChild(users_label);
            users_div.appendChild(document.createElement("br"));

            for (i=0; i<users_json[application_name].length; i++) {
                var x = document.createElement("input");
                x.setAttribute("type", "checkbox");
                x.setAttribute("value", users_json[application_name][i]);
                x.setAttribute("name", users_json[application_name][i]);
                users_div.appendChild(x);

                var label = document.createElement("label");
                label.appendChild(document.createTextNode(users_json[application_name][i]));
                users_div.appendChild(label);

                var linebreak = document.createElement("br");
                linebreak.appendChild(document.createTextNode(users_json[application_name][i]));
                users_div.appendChild(linebreak);
            }

            //var x = document.createElement("input");
            //x.setAttribute("type", "checkbox");
            //x.setAttribute("value", "abc");
            //x.setAttribute("name", "xyz");

            //var label = document.createElement("label")
            //label.appendChild(document.createTextNode(" ASDF"))

            alert("update deps done")
        }
    </script>

    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
    </style>
    <!-- Custom styles for this template -->
    <link rel="stylesheet" href="{% static 'css/starter-template.css' %}">
  </head>

<body>
  <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
  <a class="navbar-brand" href="#">GPTune History DB</a>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarsExampleDefault">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item">
        <a class="nav-link" href="{% url 'main:index' %}">Home<span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle active" href="#" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Public Repository</a>
        <div class="dropdown-menu" aria-labelledby="dropdown01">
          <a class="dropdown-item" href="{% url 'repo:dashboard' %}">Dashboard</a>
          <a class="dropdown-item" href="{% url 'repo:examples' %}">Examples</a>
        </div>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{% url 'documentation:index' %}">Documentation</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="https://github.com/gptune/GPTune/tree/history_db">Github</a>
      </li>
      <li class="nav-item">
          <a class="nav-link" href="{% url 'account:login' %}">Login</a>
      </li>
    </ul>

    {% if user.is_authenticated %}
    <a href="{% url 'account:logout' %}">
      <button class="btn btn-secondary my-2 my-sm-0">Logout</button>
    </a>
    {% endif %}

  </div>
  </nav>

<div class="container-fluid">
  <div class="row">
    <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
      <div class="sidebar-sticky pt-3">
        <ul class="nav flex-column">
          <li class="nav-item">
            <a class="nav-link active" href="#">
              <span data-feather="home"></span>
              Dashboard <span class="sr-only">(current)</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'repo:display' %}">
              <span data-feather="file"></span>
              Display example
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="shopping-cart"></span>
              Placeholder
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="users"></span>
              Placeholder
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="bar-chart-2"></span>
              Placeholder
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="layers"></span>
              Placeholder
            </a>
          </li>
        </ul>
      </div>
    </nav>

    <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-md-4">
      <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h1 class="h2">Dashboard</h1>
        <div class="btn-toolbar mb-2 mb-md-0">
          <div class="btn-group mr-2">
            <!-- <button type="button" class="btn btn-sm btn-outline-secondary">Share</button> -->
            <a href="{% url 'repo:export' %}?application={{application}}&current_page={{page_num}}&machine_deps={{machine_deps_json}}&software_deps_json={{software_deps_json}}&users_json={{users_json}}">
            <button type="button" class="btn btn-sm btn-outline-secondary">Export JSON</button>
            </a>
          </div>
          <!--
          <button type="button" class="btn btn-sm btn-outline-secondary dropdown-toggle">
            <span data-feather="calendar"></span>
            This week
          </button>
          -->
        </div>
      </div>

      <form method="POST">
        {% csrf_token %}
        <div class="well">
          <h2 style="margin-top: 0">Search Filter</h2>
          <div class="row">
            <div class="form-group col-sm-4 col-md-3">
                Application<br>
                <select name="application" id="applicationVal" onChange = "UpdateDeps();">
                  <option value="" label=" "selected>Select application</option>
                  {% if applications_avail %}
                    {% for application_avail in applications_avail %}
                    <option value="{{ application_avail }}">{{ application_avail }}</option>
                    </li>
                    {% endfor %}
                  {% else %}
                  {% endif %}
                </select>
            </div>
            <div class="form-group col-sm-4 col-md-3" id="machine_deps">
            </div>
            <div class="form-group col-sm-4 col-md-3" id="software_deps">
            </div>
            <div class="form-group col-sm-8 col-md-6" id="users_deps">
            </div>
          </div>
          <button type="submit" class="btn btn-primary">
            <span class="glyphicon glyphicon-search"></span> Search
          </button>
        </div>
      </form>

      {% ifnotequal application "" %}
      <div>
        <br><br>
        <h2>Search Condition</h2>

        Application: {{ application }}
        <br>
        Machine Deps: {{ machine_deps_json }}
        <br>
        Software Deps: {{ software_deps_json }}
        <br>
        Users Deps: {{ users_json }}
        <br><br>
      </div>
      {% else %}
      {% endifnotequal %}

      {% ifnotequal num_func_eval 0 %}
      <div class="table-responsive">
        <h2>Performance Data</h2>
        <br><br>
        number of function evaluation result: {{ num_func_eval }}
        <br>

        <table class="table table-striped table-sm">
          <thead>
            <tr>
              <th>#</th>
              <th>Input Task</th>
              <th>Tuning Parameter</th>
              <th>Output Result</th>
              <th>Date</th>
              <th>UID (Details)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>{{ perf_data.0.id }}</td>
              <td>{{ perf_data.0.I }}</td>
              <td>{{ perf_data.0.P }}</td>
              <td>{{ perf_data.0.O }}</td>
              <td>{{ perf_data.0.time.tm_mon }}/{{ perf_data.0.time.tm_mday }}/{{ perf_data.0.time.tm_year }}</td>
              <td><a href="/repo/archive/{{ perf_data.0.uid }}/">{{ perf_data.0.uid }}</a></td>
            </tr>
            <tr>
              <td>{{ perf_data.1.id }}</td>
              <td>{{ perf_data.1.I }}</td>
              <td>{{ perf_data.1.P }}</td>
              <td>{{ perf_data.1.O }}</td>
              <td>{{ perf_data.1.time.tm_mon }}/{{ perf_data.1.time.tm_mday }}/{{ perf_data.1.time.tm_year }}</td>
              <td><a href="/repo/archive/{{ perf_data.1.uid }}/">{{ perf_data.1.uid }}</a></td>
            </tr>
            <tr>
              <td>{{ perf_data.2.id }}</td>
              <td>{{ perf_data.2.I }}</td>
              <td>{{ perf_data.2.P }}</td>
              <td>{{ perf_data.2.O }}</td>
              <td>{{ perf_data.2.time.tm_mon }}/{{ perf_data.2.time.tm_mday }}/{{ perf_data.2.time.tm_year }}</td>
              <td><a href="/repo/archive/{{ perf_data.2.uid }}/">{{ perf_data.2.uid }}</a></td>
            </tr>
            <tr>
              <td>{{ perf_data.3.id }}</td>
              <td>{{ perf_data.3.I }}</td>
              <td>{{ perf_data.3.P }}</td>
              <td>{{ perf_data.3.O }}</td>
              <td>{{ perf_data.3.time.tm_mon }}/{{ perf_data.3.time.tm_mday }}/{{ perf_data.3.time.tm_year }}</td>
              <td><a href="/repo/archive/{{ perf_data.3.uid }}/">{{ perf_data.3.uid }}</a></td>
            </tr>
            <tr>
              <td>{{ perf_data.4.id }}</td>
              <td>{{ perf_data.4.I }}</td>
              <td>{{ perf_data.4.P }}</td>
              <td>{{ perf_data.4.O }}</td>
              <td>{{ perf_data.4.time.tm_mon }}/{{ perf_data.4.time.tm_mday }}/{{ perf_data.4.time.tm_year }}</td>
              <td><a href="/repo/archive/{{ perf_data.4.uid }}/">{{ perf_data.4.uid }}</a></td>
            </tr>
            <tr>
              <td>{{ perf_data.5.id }}</td>
              <td>{{ perf_data.5.I }}</td>
              <td>{{ perf_data.5.P }}</td>
              <td>{{ perf_data.5.O }}</td>
              <td>{{ perf_data.5.time.tm_mon }}/{{ perf_data.5.time.tm_mday }}/{{ perf_data.5.time.tm_year }}</td>
              <td><a href="/repo/archive/{{ perf_data.5.uid }}/">{{ perf_data.5.uid }}</a></td>
            </tr>
            <tr>
              <td>{{ perf_data.6.id }}</td>
              <td>{{ perf_data.6.I }}</td>
              <td>{{ perf_data.6.P }}</td>
              <td>{{ perf_data.6.O }}</td>
              <td>{{ perf_data.6.time.tm_mon }}/{{ perf_data.6.time.tm_mday }}/{{ perf_data.6.time.tm_year }}</td>
              <td><a href="/repo/archive/{{ perf_data.6.uid }}/">{{ perf_data.6.uid }}</a></td>
            </tr>
            <tr>
              <td>{{ perf_data.7.id }}</td>
              <td>{{ perf_data.7.I }}</td>
              <td>{{ perf_data.7.P }}</td>
              <td>{{ perf_data.7.O }}</td>
              <td>{{ perf_data.7.time.tm_mon }}/{{ perf_data.7.time.tm_mday }}/{{ perf_data.7.time.tm_year }}</td>
              <td><a href="/repo/archive/{{ perf_data.7.uid }}/">{{ perf_data.7.uid }}</a></td>
            </tr>
            <tr>
              <td>{{ perf_data.8.id }}</td>
              <td>{{ perf_data.8.I }}</td>
              <td>{{ perf_data.8.P }}</td>
              <td>{{ perf_data.8.O }}</td>
              <td>{{ perf_data.8.time.tm_mon }}/{{ perf_data.8.time.tm_mday }}/{{ perf_data.8.time.tm_year }}</td>
              <td><a href="/repo/archive/{{ perf_data.8.uid }}/">{{ perf_data.8.uid }}</a></td>
            </tr>
            <tr>
              <td>{{ perf_data.9.id }}</td>
              <td>{{ perf_data.9.I }}</td>
              <td>{{ perf_data.9.P }}</td>
              <td>{{ perf_data.9.O }}</td>
              <td>{{ perf_data.9.time.tm_mon }}/{{ perf_data.9.time.tm_mday }}/{{ perf_data.9.time.tm_year }}</td>
              <td><a href="/repo/archive/{{ perf_data.9.uid }}/">{{ perf_data.9.uid }}</a></td>
            </tr>
            <tr>
              <td>{{ perf_data.10.id }}</td>
              <td>{{ perf_data.10.I }}</td>
              <td>{{ perf_data.10.P }}</td>
              <td>{{ perf_data.10.O }}</td>
              <td>{{ perf_data.10.time.tm_mon }}/{{ perf_data.10.time.tm_mday }}/{{ perf_data.10.time.tm_year }}</td>
              <td><a href="/repo/archive/{{ perf_data.10.uid }}/">{{ perf_data.10.uid }}</a></td>
            </tr>
            <tr>
              <td>{{ perf_data.11.id }}</td>
              <td>{{ perf_data.11.I }}</td>
              <td>{{ perf_data.11.P }}</td>
              <td>{{ perf_data.11.O }}</td>
              <td>{{ perf_data.11.time.tm_mon }}/{{ perf_data.11.time.tm_mday }}/{{ perf_data.11.time.tm_year }}</td>
              <td><a href="/repo/archive/{{ perf_data.11.uid }}/">{{ perf_data.11.uid }}</a></td>
            </tr>
            <tr>
              <td>{{ perf_data.12.id }}</td>
              <td>{{ perf_data.12.I }}</td>
              <td>{{ perf_data.12.P }}</td>
              <td>{{ perf_data.12.O }}</td>
              <td>{{ perf_data.12.time.tm_mon }}/{{ perf_data.12.time.tm_mday }}/{{ perf_data.12.time.tm_year }}</td>
              <td><a href="/repo/archive/{{ perf_data.12.uid }}/">{{ perf_data.12.uid }}</a></td>
            </tr>
            <tr>
              <td>{{ perf_data.13.id }}</td>
              <td>{{ perf_data.13.I }}</td>
              <td>{{ perf_data.13.P }}</td>
              <td>{{ perf_data.13.O }}</td>
              <td>{{ perf_data.13.time.tm_mon }}/{{ perf_data.13.time.tm_mday }}/{{ perf_data.13.time.tm_year }}</td>
              <td><a href="/repo/archive/{{ perf_data.13.uid }}/">{{ perf_data.13.uid }}</a></td>
            </tr>
            <tr>
              <td>{{ perf_data.14.id }}</td>
              <td>{{ perf_data.14.I }}</td>
              <td>{{ perf_data.14.P }}</td>
              <td>{{ perf_data.14.O }}</td>
              <td>{{ perf_data.14.time.tm_mon }}/{{ perf_data.14.time.tm_mday }}/{{ perf_data.14.time.tm_year }}</td>
              <td><a href="/repo/archive/{{ perf_data.14.uid }}/">{{ perf_data.14.uid }}</a></td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="table-responsive">
        <tr>
          Pages:
          <td>
          {% for page_num in num_pages %}
          <!-- <a href="/listSpecificPageWork?current_page={{page_num}}" > -->
          <a href="{% url 'repo:dashboard' %}?application={{application}}&current_page={{page_num}}&machine_deps={{machine_deps_json}}&software_deps_json={{software_deps_json}}&users_json={{users_json}}">
            {% ifequal page_num current_page %}
            [<b>{{ page_num }}</b>]
            {% else %}
            [{{ page_num }}]
            {% endifequal %}
          {% endfor %}
          </td>
        </tr>
      </table>

      {% else %}
      {% endifnotequal %}

    </main>
  </div>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script>window.jQuery || document.write('')</script><script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.9.0/feather.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js"></script>
        <script src="{% static 'js/dashboard.js' %}"></script></body>
</html>
